{
  "version": "v1.2.0",
  "date": "2025-11-17",
  "time": "10:00:00",
  "sections": [
    {
      "id": "overview",
      "title": "üìã Update Overview",
      "content": [
        {
          "type": "paragraph",
          "text": "This version introduces a major structural change by merging Staff and Officers management into a unified system, ensuring every officer has an account. Also includes improved migration system and documentation updates."
        },
        {
          "type": "badge",
          "text": "Version 1.2.0 - Staff & Officers Merge",
          "variant": "info"
        }
      ]
    },
    {
      "id": "major-changes",
      "title": "üîÑ Major Structural Changes",
      "content": [
        {
          "type": "card",
          "title": "Staff & Officers Management Merged",
          "content": "**Unified Management System**\n\nStaff and Officers management have been merged into a single, unified interface accessible from the Admin panel.\n\n**Key Features:**\n\n‚Ä¢ **Every Officer Must Have an Account** - Officers are now linked to user accounts via `user_id` foreign key\n‚Ä¢ **Flexible Position Assignment** - Officers can have official positions (with term dates) or staff can have manual positions\n‚Ä¢ **Resident Linking** - Officers can optionally be linked to resident records\n‚Ä¢ **Unified Interface** - All account management (staff and officers) happens in one place\n‚Ä¢ **Automatic Record Management** - System automatically creates/updates/deletes officer records when accounts are modified\n\n**Database Changes:**\n\n‚Ä¢ Added `position` column to `users` table` (for non-officer positions)\n‚Ä¢ Added `user_id` column to `officers` table (links officers to accounts)\n‚Ä¢ Foreign key constraint ensures data integrity\n\n**Migration Required:** Run `schema/run.php` or visit `/schema/run` in browser to apply changes."
        },
        {
          "type": "card",
          "title": "Improved Migration System",
          "content": "**Organized Migration Runner**\n\nEnhanced the migration system with better organization and dual-mode support:\n\n‚Ä¢ **CLI Mode** - Run migrations from command line: `php schema/run.php`\n‚Ä¢ **Browser Mode** - Run migrations via web interface: `/schema/run` (admin only)\n‚Ä¢ **Organized by Type** - Migrations grouped into:\n  - Initial Setup (base tables)\n  - Feature Additions (new columns/features)\n  - Structural Changes (major refactoring)\n‚Ä¢ **Human-Readable Output** - Clear formatting for easy debugging\n‚Ä¢ **Error Handling** - Better error reporting and summary statistics\n\n**Benefits:**\n\n‚Ä¢ Easy to debug migration issues\n‚Ä¢ Can run from browser if CLI fails\n‚Ä¢ Clear organization of migration types\n‚Ä¢ Better visibility into what's happening"
        }
      ]
    },
    {
      "id": "ui-improvements",
      "title": "üé® UI Improvements",
      "content": [
        {
          "type": "card",
          "title": "Documentation System Moved",
          "content": "**Accessible Documentation**\n\n‚Ä¢ Documentation moved to `public/docs` for web access\n‚Ä¢ Added to sidebar navigation with version display\n‚Ä¢ Current version shown in navigation bar\n‚Ä¢ Easy access to version history and changelog"
        },
        {
          "type": "card",
          "title": "Account Management UI",
          "content": "**Enhanced Staff & Officers Page**\n\n‚Ä¢ Position column added to accounts table\n‚Ä¢ Toggle checkbox to mark users as officers\n‚Ä¢ Officer fields (position, term dates, resident link) shown conditionally\n‚Ä¢ Manual position field for non-officers\n‚Ä¢ Searchable resident selection for officers\n‚Ä¢ Clear visual distinction between officers and staff"
        }
      ]
    },
    {
      "id": "removed-features",
      "title": "üóëÔ∏è Removed/Deprecated",
      "content": [
        {
          "type": "card",
          "title": "Separate Officers Page Removed",
          "content": "**Consolidation**\n\nThe separate `/officer/officers` page has been removed. All officer management is now done through the unified Staff & Officers Management page at `/admin/account`.\n\n**Migration Path:**\n\n‚Ä¢ Existing officers should be linked to user accounts\n‚Ä¢ Use the migration system to ensure data integrity\n‚Ä¢ All officer functionality preserved in new unified interface"
        }
      ]
    },
    {
      "id": "technical-details",
      "title": "‚öôÔ∏è Technical Details",
      "content": [
        {
          "type": "card",
          "title": "Database Schema Changes",
          "content": "**New Columns:**\n\n‚Ä¢ `users.position` (VARCHAR 150, NULL) - Manual position for non-officers\n‚Ä¢ `officers.user_id` (INT 11, NULL) - Foreign key to users table\n\n**New Constraints:**\n\n‚Ä¢ `fk_officer_user` - Foreign key from officers.user_id to users.id\n  - ON DELETE SET NULL\n  - ON UPDATE CASCADE\n\n**Migration File:** `schema/merge_staff_officers.php`"
        },
        {
          "type": "card",
          "title": "Code Changes",
          "content": "**Modified Files:**\n\n‚Ä¢ `public/admin/account.php` - Merged officer management\n‚Ä¢ `public/admin/add_account.php` - Handle officer creation\n‚Ä¢ `public/admin/edit_account.php` - Handle officer updates\n‚Ä¢ `public/sidebar.php` - Removed separate officers link\n‚Ä¢ `schema/run.php` - Enhanced migration system\n\n**New Files:**\n\n‚Ä¢ `schema/merge_staff_officers.php` - Database migration\n‚Ä¢ `public/docs/` - Moved documentation (was in root `docs/`)"
        }
      ]
    }
  ]
}

